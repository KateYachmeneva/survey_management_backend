{% extends 'base.html' %}
{% load static%}


{% block content %}
<style>
.nav-pills .nav-link.active, .nav-pills .show>.nav-link{
    color: var(--bs-nav-pills-link-active-color);
    background-color: #fdb30d;}

.link {
  text-decoration: none;
}

.sel{
    background-color: #fdb30d;
}

</style>


<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <div class="collapse navbar-collapse">
      <ul class="nav nav-pills m-auto">
        <li class="nav-item">
          {% if context.active == 'param' %}
          <a href="{% url 'param' %}" class="nav-link active" style="font-size:large">Общие параметры</a>
          {% else %}
          <a href="{% url 'param' %}" class="nav-link" style="font-size:large">Общие параметры</a>
          {% endif %}
        </li>
        <li class="nav-item active">
          {% if context.active == 'graph' %}
          <a href="{% url 'graph' %}" class="nav-link active" style="font-size:large">Графики контроля</a>
          {% else %}
          <a href="{% url 'graph' %}" class="nav-link" style="font-size:large">Графики контроля</a>
          {% endif %}
        </li>
        <li class="nav-item">
          {% if context.active == 'traj'%}
          <a href="{% url 'traj' %}" class="nav-link active" style="font-size:large">Траектории</a>
          {% else %}
          <a href="{% url 'traj' %}" class="nav-link" style="font-size:large">Траектории</a>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
</nav>

  <div class="row" style="margin: 0em">
      {% block left_panel %}
    <div class="col-3">
<!--      <form style="margin: 1em 5em 5em 5em">-->
<!--          <fieldset>-->
<!--              <legend>Выбор модели</legend>-->
<!--              <div class="form-group" style="margin:1em">-->
<!--                  <label for="sel-client">Дочернее общество</label>-->
<!--                  <select id="sel-client" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->

<!--              <div class="form-group" style="margin:1em">-->
<!--                  <label for="sel-field">Месторождение</label>-->
<!--                  <select id="sel-field" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->

<!--              <div class="form-group" style="margin:1em">-->
<!--                  <label for="sel-pad">Куст</label>-->
<!--                  <select id="sel-pad" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->
<!--              <div class="form-group" style="margin:1em">-->
<!--                  <label for="sel-wellbore">Ствол</label>-->
<!--                  <select id="sel-wellbore" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->
<!--              <div class="form-group" style="margin:1em">-->
<!--                  <label for="sel-section">Секция</label>-->
<!--                  <select id="sel-section" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->

<!--              <div class="form-group" style="margin: 1em">-->
<!--                  <label for="sel-run">Рейс</label>-->
<!--                  <select id="sel-run" class="form-control">-->
<!--                      <option>Disabled select</option>-->
<!--                  </select>-->
<!--              </div>-->
<!--          </fieldset>-->
<!--      </form>-->



        <!-- Дерево -->
        <div class="flex-shrink-0 p-3 bg-white" style="width: 280px;">
            <a href="/" class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom">
                <svg class="bi me-2" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
                <span class="fs-5 fw-semibold">Выбор модели</span>
            </a>
            <!-- Начало дерева(по id работаем с деревом в js) -->
            <ul class="list-unstyled ps-0" id="tree-menu">
                <!-- ДО -->
                {% for dict in context.tree %}
                <li class="mb-1">
                    <a class="btn btn-toggle align-items-center rounded collapsed " data-bs-toggle="collapse"
                       href="#{{ dict.client }}" role="button" aria-expanded="false">
                        {{ dict.client }}
                    </a>
                    <div class="collapse {% if dict.client == context.selected_client %} show {% endif %}" id="{{ dict.client }}" style="">
                        <ul class="btn-toggle-nav ">
                            <!-- Месторождение -->
                            {% for field_dict in dict.fields %}
                            <li><a href="#{{field_dict.field_name}}" class="link-dark rounded field" data-toggle="collapse">
                                {{field_dict.field_name}}</a>
                                <div class="collapse {% if field_dict.field_name == context.selected_field %} show {% endif %}" id="{{field_dict.field_name}}">
                                    <ul class="btn-toggle-nav">
                                        <!-- Куст -->
                                        {% for pad_dict in field_dict.pads %}
                                            <li><a href="#{{field_dict.field_name}}pad{{pad_dict.pad_name}}" class="link link-dark rounded pad" data-toggle="collapse">
                                                Куст {{pad_dict.pad_name}}</a>
                                                <div class="collapse {% if pad_dict.pad_name == context.selected_pad %} show {% endif %}" id="{{field_dict.field_name}}pad{{pad_dict.pad_name}}">
                                                    <ul class="btn-toggle-nav">
                                                        <!-- Скважина -->
                                                        {% for well_dict in pad_dict.wells %}
                                                        <li><a href="#{{field_dict.field_name}}well{{well_dict.well_name}}" class="link link-dark rounded well" data-toggle="collapse">
                                                            Скв. {{well_dict.well_name}}</a>
                                                            <div class="collapse {% if well_dict.well_name == context.selected_well %} show {% endif %}" id="{{field_dict.field_name}}well{{well_dict.well_name}}">
                                                                <ul class="btn-toggle-nav">
                                                                    <!-- Ствол-->
                                                                    {% for wellbore_dict in well_dict.wellbores %}
                                                                    <li><a href="#{{field_dict.field_name}}_{{wellbore_dict.wellbore}}" class="link link-dark rounded wellbore" data-toggle="collapse">
                                                                        Ствол {{wellbore_dict.wellbore}}</a>
                                                                        <div class="collapse {% if wellbore_dict.wellbore == context.selected_wellbore %} show {% endif %}" id="{{field_dict.field_name}}_{{wellbore_dict.wellbore}}">
                                                                            <ul class="btn-toggle-nav">
                                                                                <!-- Секция-->
                                                                                {% for section_dict in wellbore_dict.sections %}
                                                                                <li><a href="#{{field_dict.field_name}}_{{section_dict.section}}" class="link link-dark rounded section" data-toggle="collapse">
                                                                                    {{section_dict.section}}</a>
                                                                                    <div class="collapse {% if well_dict.well_name == context.selected_well and section_dict.section == context.selected_section %} sel show {% endif %}" id="{{field_dict.field_name}}_{{section_dict.section}}">
                                                                                        <ul class="btn-toggle-nav">
                                                                                            <!-- Рейс-->
                                                                                            {% for run_dict in section_dict.runs %}
                                                                                            <li><a href="?run_id={{run_dict.id}}" class="run">{{run_dict.run_number}}</a></li>
                                                                                            {% endfor %}
                                                                                            <!-- Конец Рейс-->
                                                                                        </ul>
                                                                                    </div>
                                                                                </li>
                                                                                {% endfor %}
                                                                                <!-- Конец Секция-->
                                                                            </ul>
                                                                        </div>
                                                                    </li>
                                                                    {% endfor %}
                                                                    <!-- Конец Ствол -->
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        {% endfor %}
                                                        <!-- Конец Скважина -->
                                                    </ul>
                                                </div>
                                            </li>
                                        {% endfor %}
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            {% endfor %}

                        </ul>
                    </div>
                </li>
                <!-- !Клиент -->
                {% endfor %}
          </ul>
      </div>

    </div>
    {% endblock %}
    <div class="col">
      {% block data %}
      {% endblock %}
    </div>
  </div>

<script src="{% static 'js/nav_menu.js'%}"></script>
<script>

</script>
{% endblock %}

