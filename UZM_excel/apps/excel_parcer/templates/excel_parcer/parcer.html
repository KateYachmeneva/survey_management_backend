{% extends 'base.html' %}
{% load static %}

{%  block header %}
    <link type="text/css" href="{% static 'css/table.css' %}" rel="stylesheet" />
{% endblock %}

{% block content %}
<center>
        <form action="" method="post" enctype="multipart/form-data" style="margin-top:1%">
            {% csrf_token %}
            <div style="max-width:500px">
                <a>Выберите рейс</a>
                    <p></p>
                     <div class="input-group mb-3">
                       <select type="text" name="run" class="form-select" id="inputGroupSelect04">
                           {% for r in context.run %}
                           {% if r == context.selected_run%}
                           <option value="{{r.id}}" selected>{{r}}</option>
                           {% else %}
                           <option value="{{r.id}}">{{r}}</option>
                           {% endif %}
                           {% endfor %}
                       </select>
                     </div>
            </div>
            <button type="submit" style="border:1">Показать данные</button>
        </form>
<hr style="color:#FFC501;margin-top:1%;border-width: 3px">
    <div class="container" style="max-width:5000px">
        <form action="" method="post" enctype="multipart/form-data" style="margin-top:1%">
            {% csrf_token %}
            <p></p>
<!--            <a href="/media/data.xlsx" download><b>Скачать Excel</b> (после нажатия кнопки <b>"Применить изменения")</b></a>-->


             <div class="row align-items-start">
                 <div class="col">
                     <table  class="table table-light  table-bordered table-hover"
                             name="table_axes"
                             style="margin-top:2%">
                         <thead class="thead-dark">
                            <tr clas="table-warning">
                                <th scope="col">Глубина</th>
                                <th scope="col">GX</th>
                                <th scope="col">GY</th>
                                <th scope="col">GZ</th>
                                <th scope="col">BX</th>
                                <th scope="col">BY</th>
                                <th scope="col">BZ</th>
                            </tr>
                         </thead>

                         <tbody>
                         {% for obj in context.data %}
                         <tr>
                             <td scope="col">{{obj.depth_dot}}</td>
                             <td scope="col">{{obj.CX_dot}}</td>
                             <td scope="col">{{obj.CY_dot}}</td>
                             <td scope="col">{{obj.CZ_dot}}</td>
                             <td scope="col">{{obj.BX_dot}}</td>
                             <td scope="col">{{obj.BY_dot}}</td>
                             <td scope="col">{{obj.BZ_dot}}</td>
                         </tr>
                         {% endfor %}
                         </tbody>
                     </table>
                 </div>

                 <div class="col">
                     <table  class="table table-light  table-bordered table-hover" name="table_calculation" style="margin-top:2%">
                        <thead class="thead-dark">
                            <tr clas="table-warning">
                                <th scope="col">Gtotal</th>
                                <th scope="col">Btotal_raw</th>
                                <th scope="col">DIP_raw</th>
                                <th scope="col" style="width: 18%">Зенитный угол</th>
                                <th scope="col">Азимут</th>
                                <th scope="col" style="width: 30%">Комментарий</th>
                            </tr>
                        </thead>

                         <tbody>
                         {% for obj in context.data %}
                         <tr>
                             {% if obj.Gtotal < context.well.min_gtotal or obj.Gtotal > context.well.max_gtotal %}
                             <td style="background-color:red" scope="col"> {{obj.Gtotal}} </td>
                             {% else %}
                             <td scope="col"> {{obj.Gtotal}} </td>
                             {% endif %}

                             {% if obj.Btotal < context.well.min_btotal or obj.Btotal > context.well.max_btotal %}
                             <td style="background-color:red" scope="col"> {{obj.Btotal}} </td>
                             {% else %}
                             <td scope="col"> {{obj.Btotal}} </td>
                             {% endif %}

                             {% if obj.Dip < context.well.min_dip or obj.Dip > context.well.max_dip %}
                             <td style="background-color:red" scope="col"> {{obj.Dip}} </td>
                             {% else %}
                             <td scope="col"> {{obj.Dip}} </td>
                             {% endif %}
                             <td scope="col">{{obj.Zenit}}</td>
                             <td scope="col">{{obj.Azimut}}</td>
                             <td style="padding: 0em;">
                                 <textarea style='width: 100%; height: 2em; Border: none; outline: none;' disabled>
                                 </textarea>
                             </td>
                         </tr>
                         {% endfor %}
                         </tbody>
                 </table>
                 </div>
             </div>
            </div>
        </form>
</center>
<script>

$('#sortTable3').DataTable();


   <!-- Отслеживаем чтобы пользователь ввел данные -->
    function validForm(){
    var f = document.forms['axe_form']['run'].value;

    if (f=='Выберите рейс'){
        alert("Необходимо выбрать рейс");
        return false;
        }
    }
</script>


{% endblock %}